<!DOCTYPE html> 
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Rock Paper Scissors</title>
</head>

<body>
    <!-- Create 3 buttons, one for each selection -->
<button id="rock">Rock</button>
<button id="paper">Paper</button>
<button id="scissors">Scissors</button>
<br>
<br>
    <!-- Add a DIV for displaying results. The part I am stuck on: Updating these results after each round. -->
    <div class="player-score">0</div>
    <div class="comp-score">0</div>
<script>

let choices = ["rock", "paper", "scissors"];
let winners= [];

let playerScore = document.querySelector('.player-score');
let compScore = document.querySelector('.comp-score');

let playerWins = 0;
let computerWins = 0;

/* Add an event listener to the buttons that call your playRound function... */
/* ...with the correct playerSelection every time a button is clicked */


let rock = document.getElementById('rock');
rock.addEventListener('click', (playRound) => {
    let playerSelection = 'rock';
    let computerSelection = getComputerChoice();
    let winner = checkWinner(playerSelection, computerSelection);
    winners.push(winner);
    console.log("You Chose: " + playerSelection);
    console.log("The Computer Chose: " + computerSelection);
    console.log("Result: " + winner);
    console.log("~~End Round~~");
}); 

let paper = document.getElementById('paper');
paper.addEventListener('click', (playRound) => {
    let playerSelection = 'paper';
    let computerSelection = getComputerChoice();
    let winner = checkWinner(playerSelection, computerSelection);
    winners.push(winner);
    console.log("You Chose: " + playerSelection);
    console.log("The Computer Chose: " + computerSelection);
    console.log("Result: " + winner);
    console.log("~~End Round~~");
});

let scissors = document.getElementById('scissors');
scissors.addEventListener('click', (playRound) => {
    let playerSelection = 'scissors';
    let computerSelection = getComputerChoice();
    let winner = checkWinner(playerSelection, computerSelection);
    winners.push(winner);
    console.log("You Chose: " + playerSelection);
    console.log("The Computer Chose: " + computerSelection);
    console.log("Result: " + winner);
    console.log("~~End Round~~");
});

function getComputerChoice() {  /* Computer Selects one of the following: Rock, Paper, Scissors */

    let choice = Math.floor(Math.random() * 3);

    if (choice == 0) {
        return ('rock'); /* Change to lowercase b/c of case insensitivity of playerSelection */
    } else if (choice == 1) {
        return ('paper');
    } else {
        return ('scissors');
    }
    
}


function playerChoice() { /* Prompts User to Enter one of the following: Rock, Paper, Scissors */
    let playerSelection = prompt("Rock Paper Scissors Shoot!", "Type one of the following: Rock, Paper, Scissors");
    while(playerSelection == null) {
        playerSelection = prompt("Please type one of the following: Rock, Paper, Scissors");
    }
    playerSelection = playerSelection.toLowerCase();
 
    let check = confirmPlayerChoice(playerSelection);

    if (check == true) {
        console.log(playerSelection);
    } else {
        playerSelection = prompt("ERROR. Please type one of the following: Rock, Paper, Scissors.")
    }
    
    playerSelection = playerSelection.toLowerCase();
    check = confirmPlayerChoice(playerSelection);
    return playerSelection;
}


function confirmPlayerChoice(playerChoice) { /* Makes sure what you type in is Rock, Paper, or Scissors. */
    if (choices.includes(playerChoice)) {
        return true;
    } else {
        return false;
    }
}

function checkWinner(playerChoice, compChoice) { /* Checks to see who won the round */

    if (playerChoice === compChoice) {
        return ("It's a tie.");
    } else if ((playerChoice === "rock" && compChoice === "scissors") ||
    (playerChoice === "scissors" && compChoice === "paper") ||
    (playerChoice === "paper" && compChoice === "rock")) {
        return ("Congrats! You Win!");
    } else {
        return ("Sorry, the Computer Wins.");
    }
}

function playRound() { /* How I fixed the error from the checkWinner function was to create this function. */
    let playerSelection = playerChoice();
    let computerSelection = getComputerChoice();
    let winner = checkWinner(playerSelection, computerSelection);
    winners.push(winner);
    console.log("You Chose: " + playerSelection);
    console.log("The Computer Chose: " + computerSelection);
    console.log("Result: " + winner);
    if (checkWinner === "Congrats! You Win!") {
        playerWins++ ;
    } else if (checkWinner === "Sorry, the Computer Wins.") {
        computerWins++ ;
    } else {
        return ("It's a tie. Nobody wins.")
    }

    console.log("~~End Round~~");
    
}

function countWins() { /* Keeps a count of who is winning each round */
    let playerWins = winners.filter((string) => (string) == "Congrats! You Win!").length;
    let compWins = winners.filter((string) => (string) == "Sorry, the Computer Wins.").length;
    let tie = winners.filter((string) => (string) == "It's a tie.").length;
    
    console.log("--Final Results--");
    console.log("Player Wins: " + playerWins);
    console.log("Computer wins: " + compWins);
    console.log("Ties: " + tie);
}

function game() { /* Plays the game 5 times */
    for(let i = 0; i < 5; i++) {
        playRound();
    }
    countWins();
}

function letsPlay() {
    playerScore.textContent = playerWins;
    compScore.textContent = compWins;
}



// Remove the Logic that plays 5 rounds: game();

// Compost Code

// function checkWinner(yourChoice, compChoice) { /* Checks to see who wins between you and the computer */

   /* compChoice = getComputerChoice();

    if (yourChoice === compChoice) {
        return ("It's a tie.");
    } else if ((yourChoice === 'rock' && compChoice === 'scissors') ||
    (yourChoice === 'scissors' && compChoice === 'paper') ||
    (yourChoice === 'paper' && compChoice === 'rock')) {
        return ("Congrats! You Win!");
    } else {
        return ("Sorry, the computer wins."); 
    } 
} */


/*
function playGame(lowCase,computerSelection) {
    if (lowCase == "rock" && computerSelection == "scissors") {
        return "You Win! Rock beats Scissors.";
    } else if (lowCase == "rock" && computerSelection == "paper") {
        return "You Lose! Paper beats Rock.";
    } else if (lowCase == "rock" && computerSelection == "rock") {
        return "It's a tie! You both chose Rock.";
    } else if (lowCase == "paper" && computerSelection == "scissors") {
        return "You Lose! Scissors beats Paper.";
    } else if (lowCase == "paper" && computerSelection == "rock") {
        return "You Win! Paper beats Rock.";
    } else if (lowCase == "paper" && computerSelection == "paper") {
        return "It's a tie! You both chose Paper.";
    } else if (lowCase == "scissors" && computerSelection == "rock") {
        return "You Lose! Rock beats Scissors.";
    } else if (lowCase == "scissors" && computerSelection == "paper") {
        return "You Win! Scissors beat Paper.";
    } else if (lowCase == "scissors" && computerSelection == "scissors") {
        return "It's a tie! You both chose Scissors.";
    } else {
        return "Please enter a valid option.  Valid options: Rock, Paper, Scissors.";
    }
} 
*/

/*
function getComputerChoice() {

    let choice = Math.floor(Math.random()* 3);

    if (choice = 0) {
        console.log('Rock');
    } else if (choice = 1) {
        console.log('Paper');
    } else {
        console.log('Scissors');
    }
    
    return choice;

}

*/

</script>
</body>

</html>